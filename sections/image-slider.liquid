<div
  class="image-slider"
  data-delay="{{ section.settings.slide_delay }}"
  data-show-navigation="{{ section.settings.show_navigation }}"
>
  <div class="slider__container">
    {% for block in section.blocks %}
      <div class="slider__slide">
        <a href="{{ block.settings.link }}">
          <picture>
            <source
              media="(max-width: 767px)"
              srcset="{% if block.settings.image_mobile != blank %}{{ block.settings.image_mobile | image_url: width: 800 }}{% endif %}"
            >
            {% if block.settings.image_desktop != blank %}
              <img
                src="{{ block.settings.image_desktop | image_url: width: 1600 }}"
                alt="Slide {{ forloop.index }}"
                width="{{ block.settings.image_desktop.width }}"
                height="{{ block.settings.image_desktop.height }}"
                loading="lazy"
              >
            {% else %}
              {{ 'image' | placeholder_svg_tag: 'w-full object-cover fill-primary/20' }}
            {% endif %}
          </picture>
        </a>
      </div>
    {% endfor %}
  </div>
  {% if section.settings.show_navigation %}
    <button class="slider__voltar">Voltar</button>
    <button class="slider__avancar">Avançar</button>
  {% endif %}
  <div class="slider__dots">
    {% for block in section.blocks %}
      <button class="slider__dot" data-index="{{ forloop.index0 }}"></button>
    {% endfor %}
  </div>
</div>

<style>
  .image-slider {
    position: relative;
    overflow: hidden;
  }

  .slider__container {
    display: flex;
  }

  .slider__slide {
    flex: 0 0 100%;
    min-width: 0;
  }

  .slider__slide img {
    width: 100%;
    height: auto;
  }

  .slider__voltar,
  .slider__avancar {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.5);
    color: white;
    border: none;
    padding: 10px;
    cursor: pointer;
  }

  .slider__voltar {
    left: 10px;
  }

  .slider__avancar {
    right: 10px;
  }

  @media (max-width: 767px) {
    .slider__voltar,
    .slider__avancar {
      display: none;
    }
  }

  .slider__dots {
    display: flex;
    justify-content: center;
    margin-top: 10px;
  }

  .slider__dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #ccc;
    margin: 0 5px;
    cursor: pointer;
  }

  .slider__dot.is-selected {
    background: #000;
  }
</style>

{% schema %}
{
  "name": "Image Slider",
  "settings": [
    {
      "type": "number",
      "id": "slide_delay",
      "label": "Delay entre slides (em milissegundos)",
      "default": 5000
    },
    {
      "type": "checkbox",
      "id": "show_navigation",
      "label": "Mostrar controles de navegação no desktop",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image_desktop",
          "label": "Imagem Desktop"
        },
        {
          "type": "image_picker",
          "id": "image_mobile",
          "label": "Imagem Mobile"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link do Slide"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Image Slider",
      "blocks": [
        {
          "type": "slide"
        },
        {
          "type": "slide"
        }
      ]
    }
  ]
}
{% endschema %}
